---
layout: default
title: BlogToc
slug: demo
language: [ 
{ abbr: en-US, name: English - America }, 
{ abbr: id, name: Indonesia }
]
customlanguage: [ 
{ name: new-label, model: language.custom.newLabel },
{ name: index, model: language.custom.index },
{ name: thumbnail, model: language.custom.thumbnail },
{ name: title, model: language.custom.title },
{ name: author, model: language.custom.author},
{ name: comment, model: language.custom.comment },
{ name: publish-date, model: language.custom.publishDate },
{ name: update-date, model: language.custom.updateDate },
{ name: summary, model: language.custom.summary },
{ name: display, model: language.custom.display },
{ name: search, model: language.custom.search },
{ name: no-records, model: language.custom.noRecords },
{ name: first-page, model: language.custom.firstPage },
{ name: last-page, model: language.custom.lastPage },
{ name: next-page, model: language.custom.nextPage },
{ name: previous-page, model: language.custom.prevPage } 
]
extendclass: [
{ name: blogtoc_id, model: extendClass.blogtoc_id, desc: "div#[[renderIdText()]]"},
{ name: blogtoc_loader, model: extendClass.blogtoc_loader, desc: div.blogtoc_loader},
{ name: blogtoc_content, model: extendClass.blogtoc_content, desc: div.blogtoc_content},
{ name: blogtoc_header, model: extendClass.blogtoc_header, desc: div.blogtoc_header},
{ name: blogtoc_label, model: extendClass.blogtoc_label, desc: select|button.blogtoc_label},
{ name: blogtoc_alphabet, model: extendClass.blogtoc_alphabet, desc: select|button.blogtoc_alphabet},
{ name: blogtoc_button, model: extendClass.blogtoc_button, desc: button},
{ name: blogtoc_filter, model: extendClass.blogtoc_filter, desc: div.blogtoc_filter},
{ name: blogtoc_display, model: extendClass.blogtoc_display, desc: div.blogtoc_display},
{ name: blogtoc_search, model: extendClass.blogtoc_search, desc: div.blogtoc_search},
{ name: blogtoc_query, model: extendClass.blogtoc_query, desc: input.blogtoc_query},
{ name: blogtoc_table, model: extendClass.blogtoc_table, desc: table.blogtoc_table},
{ name: blogtoc_footer, model: extendClass.blogtoc_footer, desc: div.blogtoc_footer},
{ name: blogtoc_pagination, model: extendClass.blogtoc_pagination, desc: div.blogtoc_pagination},
{ name: blogtoc_pagination-ul, model: "extendClass['blogtoc_pagination ul']", desc: "div.blogtoc_pagination>ul"},
{ name: blogtoc_pagination-current, model: "extendClass['blogtoc_pagination current']", desc: "div.blogtoc_pagination>li:current"},
{ name: blogtoc_pagination-disabled, model: "extendClass['blogtoc_pagination disabled']", desc: "div.blogtoc_pagination>li:disabled"}
]
---
<div class="row-fluid" id="demo-wrapper" ng-controller="DemoCtrl">
  <div class="span3 demo-fluid">
      <p><span class="legend-title">Options</span></p>
      <hr class="condensed-line">
      <div class="alert alert-error">
        Click <b>Generate Button</b> after finish customizing to view the change
      </div>
      <div class="accordion" id="options">
        <!-- group choice -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <div class="accordion-toggle">
              <label for="bt-cdn" class="checkbox">
                <input type="checkbox" name="bt-cdn" id="bt-cdn" ng-model="useCDN"> [[renderCDN()]] google code URL
              </label>
            </div>
          </div>
        </div>
        <!-- group main -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseMain" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              Blogspot URL
            </a>
          </div>
          <div id="collapseMain" class="accordion-body collapse in">
            <div class="accordion-inner">
              <form>
              <!-- date day -->
              <label for="bt-url">
                <span class="label label-important">Important!</span>
              </label>
              <input type="text" id="bt-url" name="bt-url" class="span12" ng-model="preModel.url">
              <p class="help-block">
                Your blogspot URL, <b>without</b> <code>http://</code> or <code>trailing slash</code> <i>e.g.</i> <br>
                <span class="badge badge-info">googleblog.blogspot.com</span>
              </p>
              </form>
            </div>
          </div>
        </div>
        <!-- group zero -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseZero" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              BlogToc
            </a>
          </div>  
          <div id="collapseZero" class="accordion-body collapse">
            <div class="accordion-inner">
              <!-- date day -->
              <form>
              <label for="bt-blogtoc-id">
                <span class="label label-inverse">ID</span>
              </label>
              <input type="text" id="bt-blogtoc-id" name="bt-blogtoc-id" class="span12" ng-model="preModel.blogtocId">
              <p class="help-block">
                Add custom <code>ID</code> to your widget, Otherwise will generate random <code>ID</code>
              </p>
              </form>
            </div>
          </div>
        </div>
        <!-- group zero-one -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseZeroOne" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              Binding
            </a>
          </div>
          <div id="collapseZeroOne" class="accordion-body collapse">
            <div class="accordion-inner">
              <!-- binding -->
              <form>
              <div ng-repeat="cc in junk.binding">
                <!-- table [[ cc ]]-->
                <label for="bt-binding-[[ cc[0] ]]">
                  <span class="label label-inverse">[[ cc[0] ]]</span>
                </label>
                <textarea class="btn-block" name="bt-binding-[[ cc[0] ]]" id="bt-binding-[[ cc[0] ]]" ng-model="preModel.binding[ cc[0] ]"></textarea>
                <p class="help-block">
                  A callback function and will trigger <br><b>[[ cc[1] ]]</b>.
                </p>
              </div>
              </form>
              <p class="help-block">Try it! with alerting something</p>
            </div>
          </div>
        </div>
        <!-- group zero-two -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseZeroTwo" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              Data Type
            </a>
          </div>
          <div id="collapseZeroTwo" class="accordion-body collapse">
            <div class="accordion-inner">
              <!-- binding -->
              <form>
              <!-- feed type -->
              <label for="bt-data-type">
                <span class="label label-inverse">Type</span>
              </label>
              <select name="bt-data-type" id="bt-data-type" ng-model="preModel.dataType">
                <option value="JSONP">JSONP</option>
                <!-- <option value="JSON">JSON</option> -->
              </select>
              <p class="help-block">
                The request data type we're gonna using, either <code>JSONP</code> or <code>JSON</code>.
                In this demo the <code>JSON</code> data type will not going to work because it must at the same domain
                of the blog url. (See Cross Domain Origin Policy <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Same_origin_policy_for_JavaScript">link</a>)<br>
                <ul>
                  <li><code>JSONP</code> use asynchronous script request using <code>&lt;script&gt;</code> tag.</li>
                  <li><code>JSON</code> use ajax request.</li>
                </ul>
              </p>
              </form>
            </div>
          </div>
        </div>
        <!-- group one -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseOne" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              Date
            </a>
          </div>
          <div id="collapseOne" class="accordion-body collapse">
            <div class="accordion-inner">
              <form>
              <!-- date day -->
              <label for="bt-date-day">
                <span class="label label-inverse">Day</span>
              </label>
              <input type="text" id="bt-date-day" name="bt-date-day" ng-model="preModel.date.day" ui-select2="select2Options.dateDay" class="span12">
              <p class="help-block">
                List of days. You can change the value. <i>e.g.</i> <code>Sun</code>,<code>Mon</code>,<code>Tue</code>,etc... (Days in 3 letter format) or <code>Sonntag</code>,<code>Montag</code>,<code>Dienstag</code>,etc... (The days name in your current language). But remember(!) the order are absolute, starting from <code>Sunday</code> to <code>Saturday</code>.
              </p>
              <!-- date month -->
              <label for="bt-date-month">
                <span class="label label-inverse">Month</span>
              </label>
              <input type="text" id="bt-date-month" name="bt-date-month" ng-model="preModel.date.month" ui-select2="select2Options.dateMonth" class="span12">
              <p class="help-block">
                List of months. Same as above, you can change the value according to your own taste. Starting from <code>January</code> to <code>December</code>.
              </p>
              <!-- date render -->
              <label for="bt-date-render">
                <span class="label label-inverse">Render</span>
              </label>
              <textarea class="btn-block" name="bt-date-render" id="bt-date-render" ng-model="preModel.date.renderDateText"></textarea>
              <p class="help-block">
                This is how the date will be displayed in your table. This is actually a callback function that requires 2 parameters ( <code>date</code> & <code>option</code> ) =>
<pre class="prettyprint">
callback( date, option ) {
// render the date...
}</pre>
                <code>option</code> is the user's option and <code>date</code> is JavaScript <a href="//developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date">date object</a>. The example above likely will output => <br><i>Friday, August 30 2013</i>
              </p>
              </form>
            </div>
          </div>
        </div>
        <!-- group two -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseTwo" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              Display
            </a>
          </div>
          <div id="collapseTwo" class="accordion-body collapse">
            <div class="accordion-inner">
              <form>
              <!-- display setup -->
              <label for="bt-display-setup">
                <span class="label label-inverse">Setup</span>
              </label>
              <input type="text" id="bt-display-setup" name="bt-display-setup" ng-model="preModel.display.setup" class="span4" typeahead="dst for dst in displayTemp | filter:$viewValue">
              <p class="help-block">
                The initial setup how many records will be displayed (Must be a number or string value that indicates displaying all records).
              </span>
              <!-- display template -->
              <label for="bt-display-template">
                <span class="label label-inverse">Template</span>
              </label>
              <input type="text" id="bt-display-template" name="bt-display-template" ng-model="preModel.display.template" ui-select2="select2Options.displayTemplate" class="span12">
              <p class="help-block">
                The alternative options for displaying records, You can change the value according to your own taste. The <i>string</i> value => <code>All</code> indicates displaying all records, you can change these value too (All values that have type <i>string</i> will be treated for displaying all records).
              </span>
              </form>
            </div>
          </div>
        </div>
        <!-- group three -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseThree" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              Extend Class
            </a>
          </div>
          <div id="collapseThree" class="accordion-body collapse">
            <div class="accordion-inner">
              <form>
              <p>
                The main purpose of this option is mostly for custom styling by adding additional class to the structure of DOM that this application generate.
              </p>
              {% for item in page.extendclass %}
              <!-- extend class {{ item.name | replace: '-',' ' }} -->
              <label for="{{ item.name }}">
                <span class="label label-inverse">{{ item.name | replace: '-',' ' }}</span>
              </label>
              <input type="text" id="{{ item.name }}" name="{{ item.name }}" class="span12" ng-model="preModel.{{ item.model }}">
              <p class="help-block">
                Add additional class to 
                <code>{{ item.desc }}</code>
              </p>
              {% endfor %}
              </form>
            </div>
          </div>
        </div>
        <!-- group four -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseFour" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              Feed
            </a>
          </div>
          <div id="collapseFour" class="accordion-body collapse">
            <div class="accordion-inner">
              <form>
              <!-- feed append query -->
              <label for="bt-feed-append-query">
                <span class="label label-inverse">Append Query</span>
              </label>
              <textarea class="btn-block" id="bt-feed-append-query" name="bt-feed-append-query" ng-model="preModel.feed.appendQuery"></textarea>
              <p class="help-block">
                Query parameter to be added when fetch the blogspot feed. <i>e.g.</i> 
                <code>&amp;updated-min=2008-03-16T00:00:00</code><br>
                <code>&amp;updated-max=2008-03-24T23:59:59</code><br>
                <code>&amp;orderby=updated</code> 
                (See <a href="https://developers.google.com/blogger/docs/2.0/reference#Parameters">Reference</a></code>).
                <br>
                <span class="badge badge-warning">Notes</span> Do not use these forbidden parameters => <code>start-index</code>, <code>max-results</code>, <code>alt</code>, <code>callback</code>. It will give unexpected response.
              </p>  
              <!-- feed chunk request -->
              <label for="bt-feed-chunk-request">
                <span class="label label-inverse">Chunk Request</span>
              </label>
              <input type="number" id="bt-feed-chunk-request" name="bt-feed-chunk-request" class="span3" ng-model="preModel.feed.chunkRequest" min="1">
              <p class="help-block">
                Split how many request can be made to fetch blogspot feed at one time.
              </p>
              <!-- feed limit -->
              <label for="bt-feed-limit">
                <span class="label label-inverse">Limit</span>
              </label>
              <input type="number" id="bt-feed-limit" name="bt-feed-limit" class="span3" ng-model="preModel.feed.limit" min="0">
              <p class="help-block">
                Limit How many post will be fetched. Set to <code>0</code> or <code>null</code> to fetch all posts.
              </p>
              <!-- feed request count -->
              <label for="bt-feed-request-count">
                <span class="label label-inverse">Request Count</span>
              </label>
              <input type="number" id="bt-feed-request-count" name="bt-feed-request-count" class="span3" ng-model="preModel.feed.requestCount" min="1" max="500">
              <p class="help-block">
                Set the max-results value. Max value is <b>500</b> and Min value is <b>1</b>.
              </p>
              <!-- feed type -->
              <label for="bt-feed-type">
                <span class="label label-inverse">Type</span>
              </label>
              <select name="bt-feed-type" id="bt-feed-type" ng-model="preModel.feed.type">
                <option value="default">default</option>
                <option value="summary">summary</option>
              </select>
              <p class="help-block">
                The blogger feed type we're gonna using, either <code>default</code> or <code>summary</code>.
              </p>
              </form>
            </div>
          </div>
        </div>
        <!-- group five -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseFive" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              Label
            </a>
          </div>
          <div id="collapseFive" class="accordion-body collapse">
            <div class="accordion-inner">
              <form>
              <!-- label define -->
              <label for="bt-label-define">
                <span class="label label-inverse">Define (filter)</span>
              </label>
              <input type="hidden" id="bt-label-define" name="bt-label-define" ng-model="preModel.label.define" ui-select2="select2Options.labelDefine" class="span12" ng-change="disableException()">
              <p class="help-block">
                If it's not empty, include / exclude only specific label / categories based on the options below.
              </p>
              <!-- label exception -->
              <label for="bt-label-exception">
                <span class="label label-inverse">Exception</span>
              </label>
              <label class="checkbox inline">
                <input type="checkbox" name="bt-label-exception" ng-model="preModel.label.exception" ng-disabled="!exceptionState"> [[preModel.label.exception]]
              </label>
              <p class="help-block">
                Trigger only when define option above is specified. Set to <code>true</code> <i>(Yes)</i>, will exclude the label. Set to <code>false</code> <i>(No)</i> will include the label.
              </p>
              <!-- label show label -->
              <label for="bt-label-show-label">
                <span class="label label-inverse">Show Label</span>
              </label>
              <label class="checkbox inline">
                <input type="checkbox" name="bt-label-show-label" ng-model="preModel.label.showLabel" ng-click="disableLabel()"> [[preModel.label.showLabel]]
              </label>
              <p class="help-block">
                Show Label.
              </p>
              <!-- label include label all -->
              <label for="bt-label-include-label-all">
                <span class="label label-inverse">Include Label All</span>
              </label>
              <label class="checkbox inline">
                <input type="checkbox" name="bt-label-include-label-all" ng-model="preModel.label.includeLabelAll" ng-disabled="!showLabelState"> [[preModel.label.includeLabelAll]]
              </label>
              <p class="help-block">
                Include the label that displaying all categories.
              </p>
              <!-- label setup -->
              <label for="bt-label-setup">
                <span class="label label-inverse">Label "All Categories" text</span>
              </label>
              <input type="text" id="bt-label-setup" name="bt-label-setup" class="span3" ng-model="preModel.label.setup" ng-disabled="!showLabelState || !preModel.label.includeLabelAll">
              <p class="help-block">
                The label text for displaying all categories.
              </p>
              <!-- label cloud label -->
              <label for="bt-label-cloud-label">
                <span class="label label-inverse">Show Label in "Cloud" mode</span>
              </label>
              <label class="checkbox inline">
                <input type="checkbox" name="bt-label-cloud-label" ng-model="preModel.label.cloudLabel" ng-disabled="!showLabelState"> [[preModel.label.cloudLabel]]
              </label>
              <p class="help-block">
                Option for showing label / categories in <code>dropdown</code> or <code>cloud</code> mode.
              </p>
              <!-- label show label -->
              <label for="bt-label-show-alphabet-label">
                <span class="label label-inverse">Show Alphabet Label</span>
              </label>
              <label class="checkbox inline">
                <input type="checkbox" name="bt-label-show-alphabet-label" ng-model="preModel.label.showAlphabetLabel" ng-click="disableAlphabetLabel()"> [[preModel.label.showAlphabetLabel]]
              </label>
              <p class="help-block">
                Show Alphabet Label.
              </p>
              <!-- label include label all -->
              <label for="bt-label-include-alphabet-label-all">
                <span class="label label-inverse">Include Alphabet Label All</span>
              </label>
              <label class="checkbox inline">
                <input type="checkbox" name="bt-label-include-alphabet-label-all" ng-model="preModel.label.includeAlphabetLabelAll" ng-disabled="!showAlphabetLabelState"> [[preModel.label.includeAlphabetLabelAll]]
              </label>
              <p class="help-block">
                Include the label that displaying all data without filtered by alphabet.
              </p>
              <!-- label setup alphabet -->
              <label for="bt-label-setup-alphabet">
                <span class="label label-inverse">Alphabet Label "All Data" text</span>
              </label>
              <input type="text" id="bt-label-setup-alphabet" name="bt-label-setup-alphabet" class="span3" ng-model="preModel.label.setupAlphabet" ng-disabled="!showAlphabetLabelState || !preModel.label.includeAlphabetLabelAll">
              <p class="help-block">
                The alphabet label text for displaying all data without filtered by alphabet.
              </p>
              <!-- label cloud label -->
              <label for="bt-label-cloud-alphabet-label">
                <span class="label label-inverse">Show Alphabet Label in "Cloud" mode</span>
              </label>
              <label class="checkbox inline">
                <input type="checkbox" name="bt-label-cloud-alphabet-label" ng-model="preModel.label.cloudAlphabetLabel" ng-disabled="!showAlphabetLabelState"> [[preModel.label.cloudAlphabetLabel]]
              </label>
              <p class="help-block">
                Option for showing alphabet label in <code>dropdown</code> or <code>cloud</code> mode.
              </p>
              <!-- label symbolic alpha filter-->
              <label for="bt-symbolic-alpha-filter">
                <span class="label label-inverse">Symbolif Alphabet Filter</span>
              </label>
              <input type="text" id="bt-symbolic-alpha-filter" name="bt-symbolic-alpha-filter" class="span12" ng-model="preModel.symbolicAlphabetFilter">
              <p class="help-block">
                Regular Expression to filter symbolic character. Symbolic Character will be stored in <b>"#"</b> hashtag alphabet label.
                <br>
                The Example above will be parse to <code>/^[^A-Z]/i</code>, means find character other than A to Z.
              </p>
              <!-- label alphabet member -->
              <label for="bt-label-alphabet-member">
                <span class="label label-inverse">Alphabet Member</span>
              </label>
              <input type="hidden" id="bt-label-alphabet-member" name="bt-label-alphabet-member" ng-model="preModel.label.alphabetMember" ui-select2="select2Options.labelAlphabetMember" class="span12">
              <p class="help-block">
                The Array of Alphabet Character, why this option included ?
                <br>
                Not All Country used Standard Alphabet (A to Z) which represent phonemes of their spoken language.
              </p>
              </form>
            </div>
          </div>
        </div>
        <!-- group six -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseSix" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              Language
            </a>
          </div>
          <div id="collapseSix" class="accordion-body collapse">
            <div class="accordion-inner">
              <form>
              <!-- language setup -->
              <label for="bt-language-setup">
                <span class="label label-inverse">Setup</span>
              </label>
              <select name="bt-language-setup" id="bt-language-setup" ng-model="preModel.language.setup">
                {% for item in page.language %}
                <option value="{{item.abbr}}">{{item.abbr}} - ( {{item.name}} )</option>
                {% endfor %}
              </select>
              <p class="help-block">
                The default language you're gonna using.
              </p>
              <!-- language custom -->
              <label for="bt-language-custom">
                <span class="label label-inverse">Custom</span>
              </label>
              <p>
                Override the current language with your custom choice, because sometimes the default language library we provide doesn't match with your preferences. Checkout the <a href="//github.com/clusteramaryllis/blogtoc/tree/master/lang">language library</a> for more detail. Leave the field empty if you want to use the default settings.
              </p>
              <div class="row-fluid">
                <div class="span1"></div>
                <div class="span11">
                  {% for item in page.customlanguage %}
                  <!-- language custom {{ item.name | replace: '-',' ' }} -->
                  <label for="bt-language-custom-{{ item.name }}">
                    <span class="label label-inverse">{{ item.name | replace: '-',' ' |capitalize }}</span>
                  </label>
                  <input type="text" id="bt-language-custom-{{ item.name }}" name="bt-language-custom-{{ item.name }}" ng-model="preModel.{{ item.model }}">
                  <p class="help-block">
                    Override the language for <code>{{ item.name | replace: '-',' ' }}</code>.
                  </p>
                  {% endfor %}
                  <!-- language custom result -->
                  <label for="bt-language-custom-result">
                    <span class="label label-inverse">Result</span>
                  </label>
                  <input type="text" id="bt-language-custom-result" name="bt-language-custom-result" ng-model="preModel.language.custom.result">
                  <p class="help-block">
                    Override the language for <code>result</code>. There's some language parsing here which are : <br>
                    <code>{begin}</code> will be parsing to the first index number of the current showing records.<br>
                    <code>{end}</code> will be parsing to the last index number of the current showing records.<br>
                    <code>{total}</code> will be parsing to the total records (means total posts).<br>
                    <i>e.g Showing <b>{begin}</b> to <b>{end}</b> out of <b>{total}</b>.</i> <br>
                    will be parsing to<br>
                    <i>Showing <b>1</b> to <b>10</b> out of <b>120</b>.</i>
                  </p>
                  <!-- language custom error message -->
                  <label for="bt-language-custom-error-message">
                    <span class="label label-inverse">Error Message</span>
                  </label>
                  <textarea class="btn-block" id="bt-language-custom-error-message" name="bt-language-custom-error-message" ng-model="preModel.language.custom.errorMessage"></textarea>
                  <p class="help-block">
                    Override the language for <code>error message</code>.
                  </p>
                </div><!-- span2 -->
              </div><!-- row-fluid -->
              </form>
            </div>
          </div>
        </div>
        <!-- group six one -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseSixOne" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              Link Target
            </a>
          </div>  
          <div id="collapseSixOne" class="accordion-body collapse">
            <div class="accordion-inner">
              <form>
              <!-- link target author -->
              <label for="bt-link-target-author">
                <span class="label label-inverse">Author</span>
              </label>
              <select name="bt-link-target-author" id="bt-link-target-author" ng-model="preModel.linkTarget.author" ng-options="cc for cc in targetLinks">
              </select>
              <p class="help-block">
                The link's target of author's link.
              </p>
              <!-- link target comment -->
              <label for="bt-link-target-comment">
                <span class="label label-inverse">Comment</span>
              </label>
              <select name="bt-link-target-comment" id="bt-link-target-comment" ng-model="preModel.linkTarget.comment" ng-options="cc for cc in targetLinks">
              </select>
              <p class="help-block">
                The link's target of comment's link.
              </p>  
              <!-- link target thumbnail -->
              <label for="bt-link-target-thumbnail">
                <span class="label label-inverse">Thumbnail</span>
              </label>
              <select name="bt-link-target-thumbnail" id="bt-link-target-thumbnail" ng-model="preModel.linkTarget.thumbnail" ng-options="cc for cc in targetLinks">
              </select>
              <p class="help-block">
                The link's target of thumbnail's link.
              </p>
              <!-- link target title -->
              <label for="bt-link-target-title">
                <span class="label label-inverse">Title</span>
              </label>
              <select name="bt-link-target-title" id="bt-link-target-title" ng-model="preModel.linkTarget.title" ng-options="cc for cc in targetLinks">
              </select>
              <p class="help-block">
                The link's target of title's link.
              </p>
              </form>
            </div>
          </div>
        </div>
        <!-- group seven -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseSeven" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              New Badge
            </a>
          </div>  
          <div id="collapseSeven" class="accordion-body collapse">
            <div class="accordion-inner">
              <form>
              <!-- new badge setup -->
              <label for="bt-feed-chunk-request">
                <span class="label label-inverse">Setup</span>
              </label>
              <input type="number" id="bt-feed-chunk-request" name="bt-feed-chunk-request" class="span3" ng-model="preModel.newBadge.setup">
              <p class="help-block">
                The initial setup how many <span class="badge badge-info">New</span> label will be glued to the newest published post (Must be a number).
              </p>
              <!-- new badge render -->
              <label for="bt-new-badge-render">
                <span class="label label-inverse">Render</span>
              </label>
              <textarea class="btn-block" name="bt-new-badge-render" id="bt-new-badge-render" ng-model="preModel.newBadge.renderBadgeText"></textarea>
              <p class="help-block">
                This is how the <span class="badge badge-info">New</span> label will be displayed. This is actually a callback function that requires 1 parameters ( <code>language</code> ) =>
<pre class="prettyprint">
callback( language ) {
// display the label
}</pre>
                <code>language</code> is the language you set in language section option, refer to <a id="reveal-new-label" href="#bt-language-custom-new-label">this</a>.
              </p>
              </form>
            </div>
          </div>
        </div>
        <!-- group seven one -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseSevenOne" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              Number
            </a>
          </div>  
          <div id="collapseSevenOne" class="accordion-body collapse">
            <div class="accordion-inner">
              <form>
              <!-- number render -->
              <label for="bt-post-label-render">
                <span class="label label-inverse">Render</span>
              </label>
              <textarea class="btn-block" name="bt-number-render" id="bt-number-render" ng-model="preModel.number.renderNumberText"></textarea>
              <p class="help-block">
                Format the number in index column, pagination, and page report. Callback function with one parameter ( <code>idx</code> ) =>
<pre class="prettyprint">
callback( idx ) {
// format the number
}</pre>
                <code>idx</code> is the number.
              </p>
              </form>
            </div>
          </div>
        </div>
        <!-- group eight -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseEight" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              Pagination
            </a>
          </div>
          <div id="collapseEight" class="accordion-body collapse">
            <div class="accordion-inner">
              <form>
              <!-- pagination adjacents -->
              <label for="bt-pagination-adjacents">
                <span class="label label-inverse">Adjacents</span>
              </label>
              <input type="number" id="bt-pagination-adjacents" name="bt-pagination-adjacents" class="span3" ng-model="preModel.pagination.adjacents">
              <p class="help-block">
                The pagination adjacents (Must be a number).
              </p>
              <!-- pagination page -->
              <div ng-repeat="cc in junk.pagination">
                <label for="bt-pagination-[[ cc[0] ]]">
                  <span class="label label-inverse">[[ cc[0] ]]</span>
                </label>
                <label class="checkbox inline">
                  <input type="checkbox" name="bt-pagination-[[ cc[0] ]]" ng-model="preModel.pagination[ cc[0] ]"> [[ preModel.pagination[ cc[0] ] ]]
                </label>
                <p class="help-block">
                  Show the <code>[[ cc[1] ]]</code> pagination.
                </p>
              </div>
              </form>
            </div>
          </div>
        </div>
        <!-- group eight-nine -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseEightNine" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              Post Label
            </a>
          </div>
          <div id="collapseEightNine" class="accordion-body collapse">
            <div class="accordion-inner">
              <form>
              <!-- post label setup -->
              <label for="bt-post-label-separator">
                <span class="label label-inverse">Separator</span>
              </label>
              <input type="text" id="bt-post-label-separator" name="bt-post-label-separator" class="span3" ng-model="preModel.postLabel.separator">
              <p class="help-block">
                The post label separator
              </p>
              <!-- post label render -->
              <label for="bt-post-label-render">
                <span class="label label-inverse">Render</span>
              </label>
              <textarea class="btn-block" name="bt-post-label-render" id="bt-post-label-render" ng-model="preModel.postLabel.renderPostLabelText"></textarea>
              <p class="help-block">
                Wrapping each post label with custom html. This is actually a callback function that requires 1 parameters ( <code>label</code> ) =>
<pre class="prettyprint">
callback( label ) {
// wrap each label
}</pre>
                <code>label</code> is post label name.
              </p>
              </form>
            </div>
          </div>
        </div>
        <!-- group nine -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseNine" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              Progress
            </a>
          </div>  
          <div id="collapseNine" class="accordion-body collapse">
            <div class="accordion-inner">
              <form>
              <!-- progress -->
              <label for="bt-progress-render">
                <span class="label label-inverse">Render</span>
              </label>
              <span class="help-block pull-right">
                <span class="label label-important">Need JavaScript knowledge</span>
              </span>
              <textarea class="btn-block" name="bt-progress-render" id="bt-progress-render" ng-model="preModel.progress.renderProgressText"></textarea>
              <button class="btn btn-block" ng-click="bootstrapExample($event)">Example using bootstrap <br>progress bar</button>
              <button class="btn btn-block" ng-click="imgExample($event)">Example using image loader from <br><a href="http://metroui.org.ua/">Metro UI</a></button>
              <button class="btn btn-block" ng-click="defaultExample($event)">Reset Default Example</button>
              <p class="help-block">
                Customize your waiting progress animation. This is actually a callback function that requires 2 parameters ( <code>elem</code> & <code>progress</code> ) =>
<pre class="prettyprint">
callback( elem, progress ) {
// animate your waiting progress
}</pre>
                <code>elem</code> is the element that the progress will be apended and <code>progress</code> is percentage value of progress ( current loading text state ).
              </p>
              </form>
            </div>
          </div>
        </div>
        <!-- group nine one -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseNineOne" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              Right To Left (RTL)
            </a>
          </div>  
          <div id="collapseNineOne" class="accordion-body collapse">
            <div class="accordion-inner">
              <form>
              <!-- label exception -->
              <label for="bt-right-to-left">
                <span class="label label-inverse">Right to Left Mode</span>
              </label>
              <label class="checkbox inline">
                <input type="checkbox" name="bt-right-to-left" ng-model="preModel.rightToLeft" > [[preModel.rightToLeft]]
              </label>
              <p class="help-block">
                Make the direction Right to Left.
              </p>
              </form>
            </div>
          </div>
        </div>
        <!-- group ten -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseTen" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              Search
            </a>
          </div>  
          <div id="collapseTen" class="accordion-body collapse">
            <div class="accordion-inner">
              <form>
              <!-- marker render -->
              <label for="bt-search-marker-render">
                <span class="label label-inverse">Marker Render</span>
              </label>
              <textarea class="btn-block" name="bt-search-marker-render" id="bt-search-marker-render" ng-model="preModel.search.renderSearchText"></textarea>
              <p class="help-block">
                Mark the the string result that match with searching query. This is actually a callback function that requires 1 parameters ( <code>match</code> ) =>
<pre class="prettyprint">
callback( match ) {
// mark the matching query
}</pre>
                <code>match</code> is the matching query string. The example above will <b>bold</b> the matching query text.
              </p>
              </form>
            </div>
          </div>
        </div>
        <!-- group eleven -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseEleven" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              Sorting
            </a>
          </div>
          <div id="collapseEleven" class="accordion-body collapse">
            <div class="accordion-inner">
              <form>
              <!-- sorting key -->
              <label for="bt-sorting-key">
                <span class="label label-inverse">Key</span>
              </label>
              <select name="bt-sorting-key" id="bt-sorting-key" ng-model="preModel.sorting.key" ng-options="cc for cc in sortingKey">
              </select>
              <p class="help-block">
                The initialization of sorting.
              </p>
              <!-- sorting order -->
              <label for="bt-sorting-order">
                <span class="label label-inverse">Order</span>
              </label>
              <select name="bt-sorting-order" id="bt-sorting-order" ng-model="preModel.sorting.order">
                <option value="ascending">ascending</option>
                <option value="descending">descending</option>
              </select>
              <p class="help-block">
                The sorting order based on sorting key above, either <code>ascending</code> or <code>descending</code>.
              </p>
              </form>
            </div>
          </div>
        </div>
        <!-- group twelve -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseTwelve" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              Summary
            </a>
          </div>
          <div id="collapseTwelve" class="accordion-body collapse">
            <div class="accordion-inner">
              <form>
              <!-- new badge setup -->
              <label for="bt-summary">
                <span class="label label-inverse">Word Limit</span>
              </label>
              <input type="number" id="bt-summary" name="bt-summary" class="span3" ng-model="preModel.summary.wordLimit">
              <p class="help-block">
                Limit the summary text of your blog post (Must be a number).
              </p>
              </form>
            </div>
          </div>
        </div>
        <!-- group thirteen -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseThirteen" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              Table
            </a>
          </div>
          <div id="collapseThirteen" class="accordion-body collapse">
            <div class="accordion-inner">
              <form>
              <!-- table order -->
              <label for="bt-table-order">
                <span class="label label-inverse">Order</span>
              </label>
              <input type="text" id="bt-table-order" name="bt-table-order" ui-select2="select2Options.tableOrder" class="span12" ng-model="preModel.table.order">
              <p class="help-block">
                The order of data that will display in table
              </p>
              <div ng-repeat="cc in preModel.table.order">
                <!-- table [[ cc ]]-->
                <label for="bt-table-[[ cc ]]">
                  <span class="label label-inverse">[[ cc ]] width point</span>
                </label>
                <input type="number" class="span3 bt-point" name="bt-table-[[ cc ]]" id="bt-table-[[ cc ]]" ng-model="preModel.table[cc+'WidthPoint']" step="0.1">
                <p class="help-block">
                  Calculate the width of <code>[[ cc ]] &lt;thead&gt;</code> by point.
                </p>
                </form>
              </div>
            </div>
          </div>
        </div>
        <!-- group fourteen -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseFourteen" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              Theme
            </a>
          </div>
          <div id="collapseFourteen" class="accordion-body collapse">
            <div class="accordion-inner">
              <form>
              <!-- theme built -->
              <label for="bt-theme-built">
                <span class="label label-inverse">Use Built in Theme</span>
              </label>
              <label class="checkbox inline">
                <input type="checkbox" name="bt-theme-built" ng-model="builtInMode" ng-change="resetStandalone()"> [[builtInMode]]
              </label>
              <p class="help-block">
                Using built in theme or your own custom theme
              </p>
              <!-- theme setup -->
              <label for="bt-theme-default">
                <span class="label label-inverse">Setup</span>
              </label>
              <select name="bt-theme-default" id="bt-theme-default" ng-model="preModel.theme.setup" ng-disabled="!builtInMode" class="span12">
                <option value="bootstrap">bootstrap</option>
                <!-- <option value="dark-bootstrap">dark-bootstrap</option>
                <option value="bootmetro">bootmetro</option>
                <option value="todc-bootstrap">todc-bootstrap</option> -->
              </select>
              <!-- theme setup -->
              <input type="text" id="bt-theme-custom" name="bt-theme-custom" ng-model="preModel.theme.setup" ng-disabled="builtInMode" class="span12">
              <!-- theme standalone -->
              <!-- <label for="bt-theme-standalone">
                <span class="label label-inverse">Standalone</span>
              </label>
              <label class="checkbox inline">
                <input type="checkbox" name="bt-theme-standalone" ng-model="preModel.theme.standalone" ng-disabled="builtInMode"> [[preModel.theme.standalone]]
              </label>
              <p class="help-block">
                Set the standalone to <code>true</code> if you're not using theme bundle (<a href="detail.html#theme-bundle">See Detail</a>).
              </p> -->
              <!-- change background color -->
              <!-- <p class="help-block">Change background color</p>
              <div class="input-append colorpicker-component cbsp" data-color="rgb(255, 255, 255)" data-color-format="rgb" id="cp3">
                <input type="text" value="rgb(255, 255, 255)">
                <span class="add-on"><i style="background-color: rgb(255, 255, 255)"></i></span>
              </div> -->
              <p class="help-block">
                For now we only provide <a href="http://getbootstrap.com/">Twitter bootstrap</a> as our basic theme.
                <br>
                If you use your custom theme. You might be have to write your own CSS for customing. <br>
                You might consider to add your own custom theme to become one of our built theme by contributing on <a href="https://github.com/clusteramaryllis/blogtoc">github</a> page.
              </p>
              </form>
            </div>
          </div>
        </div>
        <!-- group fifteen -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#collapseFifteen" class="accordion-toggle" data-toggle="collapse" data-parent="#options">
              Thumbnail
            </a>
          </div>
          <div id="collapseFifteen" class="accordion-body collapse">
            <div class="accordion-inner">
              <form>
              <!-- thumbnail blank -->
              <label for="bt-thumbnail-blank">
                <span class="label label-inverse">Blank</span>
              </label>
              <input type="url" id="bt-thumbnail-blank" name="bt-thumbnail-blank" ng-model="preModel.thumbnail.blank" class="span12">
              <p class="help-block">
                <code>URL</code> for transparent blank image, use for lazyload.
              </p>
              <!-- thumbnail not found -->
              <label for="bt-thumbnail-not-found">
                <span class="label label-inverse">Not Found</span>
              </label>
              <input type="url" id="bt-thumbnail-not-found" name="bt-thumbnail-not-found" ng-model="preModel.thumbnail.notFound" class="span12">
              <p class="help-block">
                <code>URL</code> for not found image, a fallback if thumbnail is not found.
              </p>
              <!-- thumbnail sample -->
              <label for="bt-thumbnail-sample">
                <span class="label label-inverse">Sample</span>
              </label>
              <input type="url" id="bt-thumbnail-sample" name="bt-thumbnail-sample" ng-model="preModel.thumbnail.sample" class="span12">
              <p class="help-block">
                <code>URL</code> for sample image, use for test the image on the fly service.
              </p>
              <!-- thumbnail size -->
              <label for="bt-thumbnail-size">
                <span class="label label-inverse">Blogpost Thumbnail Size</span>
              </label>
              <input type="number" id="bt-thumbnail-size" name="bt-thumbnail-size" class="span3" ng-model="preModel.thumbnail.size">
              <p class="help-block">
                The thumbnail dimension size found in the blog post.
              </p>
              <!-- thumbnail author size -->
              <label for="bt-thumbnail-author-size">
                <span class="label label-inverse">Author Thumbnail Size</span>
              </label>
              <input type="number" id="bt-thumbnail-author-size" name="bt-thumbnail-author-size" class="span3" ng-model="preModel.thumbnail.authorSize">
              <p class="help-block">
                The thumbnail dimension size for the author who publish the post.
              </p>
              <!-- thumbnail author thumbnail -->
              <label for="bt-thumbnail-author-thumb">
                <span class="label label-inverse">Show Author Thumbnail</span>
              </label>
              <label class="checkbox inline">
                <input type="checkbox" name="bt-thumbnail-author-thumb" ng-model="preModel.thumbnail.authorThumbnail"> [[preModel.thumbnail.authorThumbnail]]
              </label>
              <p class="help-block">
                Show the author thumbnail?
              </p>
              </form>
            </div>
          </div>
        </div>
        <!-- last group -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <div class="accordion-toggle">
              <button id="generate" class="btn btn-danger btn-block" type="button">Generate</button>
            </div>
          </div>
        </div>  
      </div>
  </div><!-- span3 -->
  <div class="span9 demo-fluid">
      <p><span class="legend-title">Result</span></p>
      <hr class="condensed-line">
      <div class="tabbable">
        <ul class="nav nav-tabs">
          <li class="active"><a href="#tab1" data-toggle="tab">Display</a></li>
          <li><a href="#tab2" data-toggle="tab">How to use in your blog</a></li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane active" id="tab1">
            <script src="blogtoc.js"></script>
            <div id="blogtoc"></div>
            <script>
              // Set Base URL
              BlogToc.baseURL( './' ); 
              var myDiv = document.getElementById('blogtoc');
              BlogToc( myDiv ).build();
            </script>
          </div>
          <div class="tab-pane" id="tab2">
            <p>Before you use it, please read <a href="https://github.com/clusteramaryllis/blogtoc/blob/develop/LICENSE" target="_blank">LICENSE</a> file</p>
            <p>Place this code somewhere in the <code>&lt;head&gt;&lt;/head&gt;</code> section</p>
<pre class="prettyprint linenums" id="result-00">
</pre>              
            <p>Then add these codes below in your blog page or post <span class="help-inline">(these are just a pre-built example. You can change these codes manually)</span>.</p>
<pre class="prettyprint linenums" id="result-01">
</pre>
<div id="result-01-hidden" style="display: none">
[[modelOneRender()]]
</div>              
          </div>
        </div>
      </div>
  </div><!-- span9 -->
</div><!-- row-fluid -->

<script>
  // store temp data
  var _junk = {
    label: {},
    table: {},
    other: {}
  };
  // store default data
  var _def = {
    blogtocId: '',
    binding: {},
    dataType: 'JSONP',
    date: {
      day: ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],
      month: 'January,February,March,April,May,June,July,August,September,October,November,December'.split(','),
      renderDateText: "option.date.day[ date.getDay() ] + ', ' + option.date.month[ date.getMonth() ] + ' ' + date.getDate() + ' ' + date.FullYear()"    
    },
    display: {
      setup: '10',
      template: ['5','10','25','50','All']
    },
    feed: {
      appendQuery: '',
      chunkRequest: 1,
      limit: 0,
      requestCount: 500,
      type: 'default'
    },
    extendClass: {},
    label: {
      define: [],
      exception: false,
      showLabel: true,
      includeLabelAll: true,
      setup: "All",
      cloudLabel: false,
      showAlphabetLabel: false,
      includeAlphabetLabelAll: true,
      setupAlphabet: "All",
      cloudAlphabetLabel: false,
      symbolicAlphabetFilter: '[^A-Z]',
      alphabetMember: ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z']
    },
    language: {
      setup: 'en-US',
      custom: {
        result: '',
        errorMessage: ''
      }
    },
    linkTarget: {
      author: '_self',
      thumbnail: '_self',
      title: '_self',
      comment: '_self' 
    },
    newBadge: {
      setup: 5,
      renderBadgeText: "'<span class=\"label\">' + language + '</span>'"
    },
    number: {
      renderNumberText: "idx;"
    },
    pagination: {
      adjacents: 2
    },
    progress: {
      renderProgressText: "var span; if ( ( span = elem.getElementsByTagName('span')[0] ) ) { span.innerHTML = progress; } else { elem.innerHTML = 'Loading <span>' + progress + '</span> %'; }"
    },
    postLabel: {
      separator: '',
      renderPostLabelText: "'<span>' + label + '</span>'"
    },
    rightToLeft: false,
    search: {
      renderSearchText: "'<b>' + match + '</b>'"
    },
    sorting: {
      key: 'title',
      order: 'ascending'
    },
    summary: {
      wordLimit: 200
    },
    table: {
      order: ["index","thumbnail","title","publishDate","updateDate","author","comment"]
    },
    theme: {
      setup: 'bootstrap'
    },
    thumbnail: {
      blank: 'http://3.bp.blogspot.com/-trkoRRazZ7A/UdtEVufkxiI/AAAAAAAABxI/DOJ7jAUv1G4/s1600/blank.gif',
      notFound: 'http://3.bp.blogspot.com/-p7gZDNwTJbw/UdkqBnBb1bI/AAAAAAAAALI/hoCIpF74N80/s1600/image_not_available.jpg',
      sample: 'http://s20.postimg.org/7oz0eeuyx/blank.gif',
      size: 72,
      authorSize: 36,
      authorThumbnail: true
    },
    url: ''
  };
  // store final data
  var _final = {};

  // some data generate by jekyll
  {% for item in page.extendclass %}_def.{{ item.model }} = '';
  {% endfor %}
  {% for item in page.customlanguage %}_def.{{ item.model }} = '';
  {% endfor %}

  // populate temp data
  _junk.binding = [
    ['onAfterDataChange', 'after the data in the table changes' ],
    ['onBeforeDataChange', 'before the data in the table changes'],
    ['onInit', 'when the BlogToc App began initialization (first showing a loading progress)'],
    ['onLiveDataChange', 'everytime the data in the table making a change'],
    ['onLoaded', 'when the BlogToc App finish loaded']
  ];
  _junk.pagination = [
    ['showNextPage', 'next page'],
    ['showPrevPage', 'prev page'],
    ['showFirstPage', 'first page'],
    ['showLastPage', 'last page']
  ];
  _junk.bindingTest = [];
  _junk.label.define = [];
  _junk.other.boot = "if( elem.className.lastIndexOf('progress') === -1 ) { elem.className += ' progress'; } if( ( div = elem.firstChild ) ) { div.style.width = progress + '%'; } else { div = document.createElement('div'); div.className = 'bar'; div.style.width = progress + '%'; elem.appendChild(div); }";
  _junk.other.img = "var img; if ( !( img = elem.getElementsByTagName('img')[0] ) ) { elem.innerHTML = '<div style=\"text-align: center\"><img src=\"//metroui.org.ua/images/preloader-w8-cycle-black.gif\" /><div>'; }"
  _junk.table.order = _def.table.order.slice(0);
  _junk.table.order.push('summary');
  _junk.table.order.push('label');
  _junk.table.idx = [2.5,7,26,12.5,12.5,10.5,11,25];

  // populate some def data with temp data
  for(var i=0; i<_junk.binding.length; i++) { 
    _def.binding[_junk.binding[i][0]] = '';
    _junk.bindingTest.push(_junk.binding[i][0]);
  }
  for(var i=0; i<_junk.pagination.length; i++) { 
    _def.pagination[_junk.pagination[i][0]] = true;
  }
  for(var i=0; i<_junk.table.order.length; i++) {
    _def.table[_junk.table.order[i]+"WidthPoint"] = _junk.table.idx[i];
  }

  // Angular init
  var docApp = angular.module('docApp', ['ui.select2', 'ui.bootstrap'/*, 'toggle-switch'*/], function($interpolateProvider) {
      $interpolateProvider.startSymbol('[[');
      $interpolateProvider.endSymbol(']]');
  });

  docApp.controller('DemoCtrl', function ($scope) {

    // properties
    $scope.preModel = {
      blogtocId: _def.blogtocId,
      binding: {},
      dataType: _def.dataType,
      date: {
        day: _def.date.day,
        month: _def.date.month,
        renderDateText: _def.date.renderDateText
      },
      display: {
        setup: _def.display.setup,
        template: _def.display.template
      },
      extendClass: {},
      feed: {
        appendQuery: _def.feed.appendQuery,
        chunkRequest: _def.feed.chunkRequest,
        limit: _def.feed.limit,
        requestCount: _def.feed.requestCount,
        type: _def.feed.type
      },
      label: {
        define: _def.label.define,
        exception: _def.label.exception,
        showLabel: _def.label.showLabel,
        includeLabelAll: _def.label.includeLabelAll,
        setup: _def.label.setup,
        cloudLabel: _def.label.cloudLabel,
        showAlphabetLabel: _def.label.showAlphabetLabel,
        includeAlphabetLabelAll: _def.label.includeAlphabetLabelAll,
        setupAlphabet: _def.label.setupAlphabet,
        cloudAlphabetLabel: _def.label.cloudAlphabetLabel,
        symbolicAlphabetFilter: _def.label.symbolicAlphabetFilter,
        alphabetMember: _def.label.alphabetMember
      },
      language: {
        setup: _def.language.setup,
        custom: {}
      },
      linkTarget: {
        author: _def.linkTarget.author,
        thumbnail: _def.linkTarget.thumbnail,
        title: _def.linkTarget.title,
        comment: _def.linkTarget.comment
      },
      newBadge: {
        setup: _def.newBadge.setup,
        renderBadgeText: _def.newBadge.renderBadgeText
      },
      number: {
        renderNumberText: _def.number.renderNumberText
      },
      search: {
        renderSearchText: _def.search.renderSearchText
      },
      sorting: {
        key: _def.sorting.key,
        order: _def.sorting.order
      },
      summary: {
        wordLimit: 200
      },
      pagination: {
        adjacents: _def.pagination.adjacents
      },
      progress: {
        renderProgressText: _def.progress.renderProgressText
      },
      postLabel: {
        separator: _def.postLabel.separator,
        renderPostLabelText: _def.postLabel.renderPostLabelText
      },
      rightToLeft: _def.rightToLeft,
      table: {
        order: _def.table.order
      },
      theme: {
        setup: _def.theme.setup
      },
      thumbnail: {
        blank: _def.thumbnail.blank,
        notFound: _def.thumbnail.notFound,
        sample: _def.thumbnail.sample,
        size: _def.thumbnail.size,
        authorSize: _def.thumbnail.authorSize,
        authorThumbnail: _def.thumbnail.authorThumbnail
      },
      url: _def.url
    };

    $scope.junk = { 
      binding: _junk.binding,
      pagination: _junk.pagination
    };

    $scope.appVersion = "{{ site.appVersion }}";
    $scope.resultModel = {}; // final result model
    $scope.objModel = {}; // first model

    $scope.renderStr = '';
    $scope.displayTemp = $scope.preModel.display.template;
    $scope.sortingKey = removeArray( $scope.preModel.table.order.slice(0), "index", "thumbnail" );
    $scope.targetLinks = ["_self", "_blank", "_top", "_parent","_new"];
    $scope.exceptionState = false;
    $scope.showLabelState = true;
    $scope.builtInMode = true;
    $scope.useCDN = true;
    $scope.CDN = '';
    $scope.addExternalLanguage = '';
    $scope.addExternalTheme = '';

    // generate by jekyll
    {% for item in page.extendclass %}$scope.preModel.{{ item.model }} = _def.{{ item.model }};
    {% endfor %}
    {% for item in page.customlanguage %}$scope.preModel.{{ item.model }} = _def.{{ item.model }};
    {% endfor %}

    $scope.preModel.language.custom.result = _def.language.custom.result;
    $scope.preModel.language.custom.errorMessage = _def.language.custom.errorMessage;
    for(var i=0; i<_junk.binding.length; i++) {
      $scope.preModel.binding[_junk.binding[i][0]] = _def.binding[_junk.binding[i][0]];
    }
    for(var i=0; i<_junk.pagination.length; i++) {
      $scope.preModel.pagination[_junk.pagination[i][0]] = _def.pagination[_junk.pagination[i][0]];
    }
    for(var i=0; i<_junk.table.order.length; i++) {
      $scope.preModel.table[_junk.table.order[i]+"WidthPoint"] = _def.table[_junk.table.order[i]+"WidthPoint"];
    }

    // select 2 options
    $scope.select2Options = {
      dateDay: {
        'multiple': true,
        'simple_tags': true,
        'tags': _def.date.day,
        'maximumSelectionSize': 7
      },
      dateMonth: {
        'multiple': true,
        'simple_tags': true,
        'tags': _def.date.month,
        'maximumSelectionSize': 12
      },
      displayTemplate: {
        'multiple': true,
        'simple_tags': true,
        'tags': _def.display.template
      },
      labelDefine: {
        'multiple': true,
        'simple_tags': true,
        tags: function() { return _junk.label.define; }
      },
      labelAlphabetMember: {
        'multiple': true,
        'simple_tags': true,
        'tags': _def.label.alphabetMember
      },
      tableOrder: {
        'multiple': true,
        'simple_tags': true,
        'locked': true,
        'tags': _junk.table.order,
        'maximumSelectionSize': 9
      }
    };

    // method
    $scope.modelOneRender = function() {

      // parse tag for dragging support
      parseTags( $("#bt-date-day") );
      parseTags( $("#bt-date-month") );
      parseTags( $("#bt-display-template") );
      parseTags( $("#bt-label-define") );
      parseTags( $("#bt-label-alphabet-member") );
      parseTags( $("#bt-table-order") );

      // parse the data
      $scope.renderStr = $scope.pushDiff();
      var str = parseTemplate( $scope );

      $scope.displayTemp = $scope.preModel.display.template;
      $scope.sortingKey = removeArray( $scope.preModel.table.order.slice(0), "index", "thumbnail" );

      _final = $scope.objModel; // assign to object model

      // provide language and theme
      if ( $scope.preModel.language.setup !== 'en-US' ) {
        $scope.addExternalLanguage = "<script type=\"text/javascript\" src=\"" + $scope.CDN + "lang/" + $scope.preModel.language.setup + ".js\"><\/script>;\n\n";
      } else {
        $scope.addExternalLanguage = '';
      }
      /*if ( $scope.preModel.theme.setup !== 'bootstrap' && $scope.builtInMode ) {
        $scope.addExternalTheme = "BlogToc.addJS(\"theme/bt_" + $scope.preModel.theme.setup + ".js\");\n\n";
      } else {
        $scope.addExternalTheme = '';
      }*/

      $("#result-00").text( "<script type=\"text/javascript\" src=\""+ $scope.CDN +"blogtoc.min.js\"><\/script>" );
      $("#result-01").text( str );
      prettyPrint();

      return str;
    };

    // Methods
    $scope.pushDiff = function () {
      $scope.resultModel = {};
      $scope.objModel = {};

      $scope.resultModel = changeDiffObj($scope.preModel, _def, _junk);
      $scope.objModel = clone($scope.resultModel);
      if ( $scope.objModel.binding ) {
        for ( var prop in $scope.objModel.binding ) {
          if ( $scope.objModel.binding.hasOwnProperty(prop) ) {
            if ( $scope.objModel.binding[prop] ) {
              $scope.objModel.binding[prop] = eval('(' + $scope.objModel.binding[prop] + ')');
            }
          }
        }
      }
      if ( $scope.objModel.date &&  $scope.objModel.date.render ) {
        $scope.objModel.date.render = eval('(' + $scope.objModel.date.render + ')');  
      }
      if ( $scope.objModel.newBadge &&  $scope.objModel.newBadge.render ) {
        $scope.objModel.newBadge.render = eval('(' + $scope.objModel.newBadge.render + ')');
      }
      if ( $scope.objModel.progress &&  $scope.objModel.progress.render ) {
        $scope.objModel.progress.render = eval('(' + $scope.objModel.progress.render + ')');
      }
      if ( $scope.objModel.search &&  $scope.objModel.search.markerRender ) {
        $scope.objModel.search.markerRender = eval('(' + $scope.objModel.search.markerRender + ')');
      }
      if ( $scope.objModel.postLabel &&  $scope.objModel.postLabel.render ) {
        $scope.objModel.postLabel.render = eval('(' + $scope.objModel.postLabel.render + ')');
      }

      if ( isEmptyObj( $scope.resultModel ) ) {
        return '';
      }

      var result = JSON.stringify( $scope.resultModel, function(key, value){
        return ( typeof value === 'function' ) ? value.toString() : value;
      }, 2 );

      return result.replace(/\}\"/gi,"}")
        .replace(/\:\s*\"function/gi,": function")
        .replace(/\u2028/g, "\\u2028")
        .replace(/\u2029/g, "\\u2029")
        .replace(/\\"/g, "\"")
        .replace(/\\n/g, "\n")
        .replace(/\\r/g, "\r")
        .replace(/\\t/g, "\t");
    };

    $scope.bootstrapExample = function(e) {
      e.preventDefault();
      $scope.preModel.progress.renderProgressText = _junk.other.boot;
    };

    $scope.imgExample = function(e) {
      e.preventDefault();
      $scope.preModel.progress.renderProgressText = _junk.other.img;
    };

    $scope.defaultExample = function(e) {
      e.preventDefault();
      $scope.preModel.progress.renderProgressText = _def.progress.renderProgressText;
    };

    $scope.getAppVersion = function() {
      return $scope.appVersion;
    };

    $scope.renderCDN = function() {
      $scope.CDN = $scope.useCDN ? "//blogtoc2.googlecode.com/svn/trunk/" + $scope.appVersion + "/" : "";
      return $scope.useCDN ? "Use" : "Don't use";
    };

    $scope.renderIdText = function() {
      return $scope.preModel.blogtocId || '{blogtoc_id}';
    };

    $scope.resetStandalone = function() {
      if ( $scope.builtInMode ) {
        $scope.preModel.theme.standalone = false;
      }
    }

    $scope.disableException = function() {
      if ( !$scope.preModel.label.define.length ) {
        $scope.preModel.label.exception = $scope.exceptionState = false;
      } else {
        $scope.exceptionState = true;
      }
    };

    $scope.disableLabel = function() {
      if ( !$scope.preModel.label.showLabel ) {
        $scope.preModel.label.includeLabelAll = false;
        $scope.preModel.label.cloudLabel = false;
        $scope.showLabelState = false;
      } else {
        $scope.showLabelState = true;
      }
    };

    $scope.disableAlphabetLabel = function() {
      if ( !$scope.preModel.label.showAlphabetLabel ) {
        $scope.preModel.label.includeAlphabetLabelAll = true;
        $scope.preModel.label.cloudAlphabetLabel = false;
        $scope.showAlphabetLabelState = false;
      } else {
        $scope.showAlphabetLabelState = true;
      }
    };
  });

  // Functions
  function parseTemplate( scope ) {

    var str = scope.addExternalLanguage +
      "<div id=\"blogtoc\"></div>\n\n" + 
      "<script type=\"text/javascript\">\n" +
      "var myDiv = document.getElementById('blogtoc');\n\n" +
      // scope.addExternalTheme +
      "BlogToc( myDiv ).build(" +
      scope.renderStr + 
      ");\n" +
      "<\/script>";

    return str;
  }

  function parseTags( el ) {
    el.on('change', function(){
        el.html( el.val() );
      })
      .select2('container').find('ul.select2-choices')
      .sortable({
        container: 'parent',
        start: function() {
          el.select2('onSortStart');
        },
        update: function() {
          el.select2('onSortEnd');
        }
      }); 
  }

  function isEmptyObj( obj ) {
    for ( var key in obj ) {
      return false;
    }
    return true;
  }

  function removeArray( arr ) {
    
    var what, a = arguments, L = a.length, ax;
    
    while ( L > 1 && arr.length ) {
      what = a[--L];
      while ( ( ax = arr.indexOf( what ) ) !== -1 ) {
        arr.splice( ax, 1 );
      }
    }
    return arr;
  }

  function clone(obj) {
      // Handle the 3 simple types, and null or undefined
      if (null == obj || "object" != typeof obj) return obj;

      // Handle Date
      if (obj instanceof Date) {
          var copy = new Date();
          copy.setTime(obj.getTime());
          return copy;
      }

      // Handle Array
      if (obj instanceof Array) {
          var copy = [];
          for (var i = 0, len = obj.length; i < len; i++) {
              copy[i] = clone(obj[i]);
          }
          return copy;
      }

      // Handle Object
      if (obj instanceof Object) {
          var copy = {};
          for (var attr in obj) {
              if (obj.hasOwnProperty(attr)) copy[attr] = clone(obj[attr]);
          }
          return copy;
      }

      throw new Error("Unable to copy obj! Its type isn't supported.");
  }

  function changeDiffObj(obj, def) {

    var result = {};

    var bindingTest = new RegExp(_junk.bindingTest.join('|'),'i');

    for (var key in obj ) {

      if ( obj.hasOwnProperty(key) ) {
        if ( !angular.equals( obj[key], def[key] ) ) {
          
          if ( angular.isArray(obj[key]) || !angular.isObject(obj[key]) ) {
            if ( key === 'renderDateText' ) { 
              result['render'] = 'function(date, option) { return ' + obj[key] + '; }';
            } else if ( key === 'renderBadgeText' ) { 
              result['render'] = 'function(language) { return ' + obj[key] + '; }';
            } else if ( key === 'renderProgressText' ) { 
              result['render'] = 'function(elem, progress) { ' + obj[key] + ' }';
            } else if ( key === 'renderSearchText' ) { 
              result['markerRender'] = 'function(match) { return ' + obj[key] + '; }';
            } else if ( key === 'renderPostLabelText' ) { 
              result['render'] = 'function(label) { return ' + obj[key] + '; }';
            } else if ( key === 'renderNumberText' ) { 
              result['render'] = 'function(idx) { return ' + obj[key] + '; }';
            } else if ( bindingTest.test(key) ) { 
              result[key] = 'function() { ' + obj[key] + ' }';
            } else if ( key === 'setup' ) {
              if ( isNaN(obj[key]) ) {
                result[key] = obj[key];
              } else {
                result[key] = +obj[key];
              }
            } else if ( key === 'template') {
              var temp = [];

              for (var i=0; i<obj[key].length; i++) {
                if ( isNaN(obj[key][i]) ) {
                  temp.push(obj[key][i]);
                } else {
                  temp.push(+obj[key][i]);
                }
              }

              result[key] = temp;

            } else if ( angular.isArray(obj[key]) ) {
              result[key] = obj[key].slice(0);
            } else {
              result[key] = obj[key]; 
            }
          } else {
            result[key] = changeDiffObj( obj[key], def[key] );
          }
        }
      }
    }

    return result;
  }

  // generate button timing
  function btnTiming() {
    $("#generate").attr("disabled",true);

    var timing = function() {
      setTimeout(function(){
        if ( !myDiv.BTLoaded ) {
          timing();
        } else {
          $("#generate").attr("disabled",false);
        }
      },100);
    };

    timing();
  }

  // jQuery
  $(function(){

    // btn timing
    btnTiming();

    // get categories
    $("#bt-url").on('blur',function(){

      if ($(this).val() == '') return;

      var url = $(this).val().replace(/.*?:\/\/|\/$/g, '');

      $.ajax({
        url : '//' + url + '/feeds/posts/summary/?max-results=0&alt=json-in-script',
        dataType: 'jsonp',
        success: function(data) {
          var feed = data.feed;

          if ('category' in feed) {
            _junk.label.define = [];
            for (var i=0,len=feed.category.length; i<len;i++) {
              _junk.label.define.push( feed.category[i].term );
            }
          }
        }
      });
    });

    // colorpicker
    $("#cp3").colorpicker().on('changeColor', function(ev){
      //console.log(ev.color.toRGB());
      $('#blogtoc').css('background',ev.color.toHex());
    });

    // autogrow on text area
    $("textarea").autogrow();

    // filter input
    $('input[type="number"]').filter_input({regex: '[0-9]'});
    $('input[type="number"]').spinner();
    $(".bt-point").filter_input({regex: '[0-9\.]'});

    // misc
    $("#reveal-new-label").on('click',function(e){
      e.preventDefault();
      $("#collapseSix").collapse('show');
      $($(this).attr("href")).focus();
    });

    // click event on generate button
    $("#generate").on('click',function(e){
      e.preventDefault();

      if ($("#bt-language-setup").val() !== 'en-US' || $("#bt-theme-default").val() !== 'bootstrap'){
        if ($("#bt-language-setup").val() !== 'en-US') {
          $.getScript("lang/" + $("#bt-language-setup").val() + ".js", function(){
            BlogToc.reset( myDiv, true, _final );
            btnTiming();
          });
          // BlogToc.addJS("lang/" + $("#bt-language-setup").val() + ".js");
        }
        /*if ($("#bt-theme-default").val() !== 'bootstrap') {
          BlogToc.addJS("theme/bt_" + $("#bt-theme-default").val() + ".js");
        }*/
      } else {
        BlogToc.reset( myDiv, true, _final );  
        btnTiming();
      }
    });

  });
</script>