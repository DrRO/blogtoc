/**!
* BlogToc v1.2.0
* Copyright 2013 Cluster Amaryllis
* Licensed under the Apache License v2.0
* http://www.apache.org/licenses/LICENSE-2.0
* 
* A javascript plugin to make table of contents for blogspot using Blogger Feed API.
*/
!function(){"use strict";var a=function(){!function(){var a="1.2.0",b="//googledrive.com/host/0B-ME4OmVndQzMFNaMWpqVzVYUFE/"+a+"/",c="#|A|B|C|D|E|F|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U|V|W|X|Y|Z".split("|"),d="Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday".split("|"),e="January|February|March|April|May|June|July|August|September|October|November|December".split("|"),f="https://lh4.googleusercontent.com/-QhzzNTYkzbE/AAAAAAAAAAI/AAAAAAAAAAA/voMJT6RfB_o/s1600/photo.jpg",g="http://3.bp.blogspot.com/-trkoRRazZ7A/UdtEVufkxiI/AAAAAAAABxI/DOJ7jAUv1G4/s1600/blank.gif",h="http://3.bp.blogspot.com/-p7gZDNwTJbw/UdkqBnBb1bI/AAAAAAAAALI/hoCIpF74N80/s1600/image_not_available.jpg",i="http://s20.postimg.org/7oz0eeuyx/blank.gif",j=/.*?:\/\/|\/$/g,k=/s\d+\-?\w?/gi,l=/(^\s+|\s{2,}|\s+$)/g,m=/(<([^>]+)>)/gi,n=/^(index|thumbnail)$/i,o=/^(actualImage|authorThumbnail|badge|category|commentURL|fullSummary|publishDateFormat|titleURL|thumbConfig|updateDateFormat)$/i,p={},q={},r="en-US",s="bootstrap",t=function(a,b){if(!a.BTLoaded){var t,u,v,x,A,C,D,G,H,J,K,L,N=a;N.BTAPP={run:function(a){var b=this,c={blogtocId:"",date:{day:d,month:e,render:function(a,b){return b.date.day[a.getDay()]+", "+b.date.month[a.getMonth()]+" "+a.getDate()+" "+a.getFullYear()}},display:{setup:10,template:[5,10,25,50,"All"]},extendClass:{},feedType:"default",label:{define:[],exception:!1,showLabel:!0,includeLabelAll:!0,setup:"All",cloudLabel:!1,showAlphabetLabel:!1,includeAlphabetLabelAll:!0,setupAlphabet:"All",cloudAlphabetLabel:!1},language:{setup:r,custom:{}},newBadge:{setup:5,render:function(a){return'<span class="label">'+a+"</span>"}},pagination:{adjacents:2},progress:{render:function(a,b){var c;(c=a.getElementsByTagName("span")[0])?c.innerHTML=b:a.innerHTML="Loading <span>"+b+"</span> %"}},search:{markerRender:function(a){return"<b>"+a+"</b>"}},sorting:{key:"title",order:"ascending"},summary:{wordLimit:200},table:{order:["index","thumbnail","title","publishDate","updateDate","author","comment"],initDataLoad:10,showHeader:!0,indexWidthPoint:2.5,authorWidthPoint:10.5,commentWidthPoint:11,publishDateWidthPoint:12.5,summaryWidthPoint:25,thumbnailWidthPoint:7,titleWidthPoint:26,updateDateWidthPoint:12.5},theme:{setup:s},thumbnail:{blank:g,notFound:h,sample:i,size:72,authorSize:36,authorThumbnail:!0},url:"chrome.blogspot.com"};t=N.BTOptions=Q(c,a),v=N.BTFeed={data:[],label:[],count:0},u=N.BTConfig={cache:{},iotf:{},iterate:0,order:{},registeredEvent:{},searchRegex:null,searchState:!1},ab(t.language.setup,q,t.language.custom),bb(t.theme.setup,p,t.extendClass),x=N.BTID,A=x.firstChild,C=E(A),D=E(C),G=E(D),H=E(G),y(x,t.extendClass.blogtoc_id),y(A,t.extendClass.blogtoc_loader),y(C,t.extendClass.blogtoc_header),y(D,t.extendClass.blogtoc_filter),y(G,t.extendClass.blogtoc_table),y(H,t.extendClass.blogtoc_footer),t.progress.render(A,0),u.cache.req=new Array,u.cache.thead={},u.nat=f.replace(k,"s"+t.thumbnail.authorSize+"-c"),u.iotf=gb(t.thumbnail.sample),u.mapper=t.table.order,u.mapperWidth=[],u.tbwrapper="display:block;width:"+t.thumbnail.size+"px;height:"+t.thumbnail.size+"px;",u.tbimg="width:"+t.thumbnail.size+"px;height:"+t.thumbnail.size+"px;",u.page=1,u.pageState=1,window["BTJSONCallback_"+x.id]=function(a){b.initFeed(a)};var l=t.url.replace(j,""),m=l+"_"+Y();l="http://"+l+"/feeds/posts/summary/?"+"max-results=0&"+"alt=json-in-script&"+"callback=BTJSONCallback_"+x.id,u.cache.req[0]=m;var n=function(){setTimeout(function(){u.iotf.server?M(l,m,function(){alert(t.language.custom.errorMessage),F(x)}):n()},1e3)};n()},initFeed:function(a){var b=this,d=a.feed;if("openSearch$totalResults"in d&&(v.count=d.openSearch$totalResults.$t),"category"in d)for(var e=t.label.define,f=e.length,g=t.label.exception,h=0,i=d.category.length;i>h;h++){var k=d.category[h].term;f&&(g&&I(k,e)||!g&&!I(k,e))||v.label.push(d.category[h].term)}v.label.sort(function(a,b){return a.toLowerCase()>b.toLowerCase()?1:-1}),t.label.includeLabelAll&&v.label.unshift(t.label.setup),L=c.slice(0),t.label.includeAlphabetLabelAll&&L.unshift(t.label.setupAlphabet),u.display=S(t.display.template,t.display.setup,v.count),u.records=t.display.setup||t.display.template[0],window["BTLDJSONCallback_"+x.id]=function(a){b.loadFeed(a)};var l,m=0,n=0,o=Math.ceil(v.count/500),p=t.url.replace(j,"");for(p="http://"+p+"/feeds/posts/"+t.feedType+"/?"+"max-results=500&"+"alt=json-in-script&"+"callback=BTLDJSONCallback_"+x.id;o>m;m++)n=500*m+1,l=p+"_"+Y(),u.cache.req[m+1]=l,M(p+"&start-index="+n,l)},loadFeed:function(a){var b=this,c=a.feed,d=[],e={},f=v.data,g=v.count,h=t.thumbnail.size,i=(t.thumbnail.authorSize,t.thumbnail.notFound),j=t.summary.wordLimit,n=t.date.render,o=u.iotf.server,p=t.progress.render;if("entry"in c){var q=0,r=c.entry.length,s=function(){setTimeout(function(){var a=c.entry[q];e.title=a.title.$t.replace(l,"");var v=a.published.$t.substring(0,10).split("-"),w=a.published.$t.substring(11,19).split(":"),x=a.updated.$t.substring(0,10).split("-"),y=a.updated.$t.substring(11,19).split(":");e.publishDateFormat=U(v,w),e.updateDateFormat=U(x,y),e.publishDate=n(e.publishDateFormat,t),e.updateDate=n(e.updateDateFormat,t);var z,B="summary"in a?a.summary.$t:"content"in a?a.content.$t:"";z=B.replace(m,"").replace(l,""),z.length>j&&(z=z.substring(0,j),z=z.substring(0,z.lastIndexOf(" "))+"...."),e.fullSummary=B,e.summary=z;var C;e.thumbConfig={},"media$thumbnail"in a?(e.thumbnail=a.media$thumbnail.url,e.actualImage=e.thumbnail.replace(k,"s0"),e.thumbnail=e.thumbnail.replace("/s72-c/","/s"+h+"-c/")):(C=/<img [^>]*src=["|\']([^"|\']+)/gi.exec(B))?(e.actualImage=C[1],e.thumbnail=Z(e.actualImage,h,o)):(e.actualImage=i,e.thumbnail=k.test(e.actualImage)?e.actualImage.replace(k,"s"+h+"-c"):Z(e.actualImage,h,o));for(var D=0;D<a.link.length;D++)"replies"===a.link[D].rel?e.commentURL=a.link[D].href:"alternate"===a.link[D].rel&&(e.titleURL=a.link[D].href);if(e.commentURL||(e.commentURL="#"),e.comment="thr$total"in a?+a.thr$total.$t:0,e.author=a.author[0].name.$t,e.authorThumbnail=a.author[0].gd$image.src.replace(k,"s"+h+"-c"),"category"in a)for(D=0;D<a.category.length;D++)d.push(a.category[D].term);e.category=d.slice(0),f.push(e),e={},d.length=0,u.iterate++,q++;var E=Math.round(100*u.iterate/g);p(A,E),r>q&&s(),u.iterate>=g&&setTimeout(function(){A.style.display="none",b.buildUI()},1e3)},1)};s()}},buildUI:function(){var a,b=this,c=t.extendClass,d=(t.thumbnail.size,u.display),e=t.sorting.order,f=t.sorting.key,g="BlogToc.label(this, this.value, document.getElementById('"+x.id+"')); return false;",h="BlogToc.alphabet(this, this.value, document.getElementById('"+x.id+"')); return false;",i="BlogToc.display(this.value, document.getElementById('"+x.id+"')); return false;",j="BlogToc.search(this.value, document.getElementById('"+x.id+"')); return false;";b.makeLabel(v.label,"showLabel","cloudLabel","setup","blogtoc_label",c.blogtoc_label,g),b.makeLabel(L,"showAlphabetLabel","cloudAlphabetLabel","setupAlphabet","blogtoc_alphabet",c.blogtoc_alphabet,h);var k,l,m,p,q,r,s=0,w=d.num.length;for(k=z("div",null,null,"blogtoc_display"),y(k,c.blogtoc_display),q=z("label"),l=z("select",{onchange:i}),r=z("span",null,t.language.custom.display);w>s;s++)p=z("option",{value:d.num[s]},d.name[s]),d.num[s]===u.records&&(p.selected=!0),l.appendChild(p);q.appendChild(l),q.appendChild(r),k.appendChild(q),D.appendChild(k),k=z("div",null,null,"blogtoc_search"),y(k,c.blogtoc_search),q=z("label"),r=z("span",null,t.language.custom.search),m=z("input",{type:"text",onkeyup:j,"data-placeholder":t.language.custom.search},null,"blogtoc_query"),y(m,c.blogtoc_query),q.appendChild(r),q.appendChild(m),k.appendChild(q),D.appendChild(k);var A,C,E,I,M,O,P,Q=u.mapper.length;for(b.calculate(),E=z("thead"),I=z("tr"),s=0;Q>s;s++)A=u.mapper[s],a="BlogToc.sort('"+A+"', document.getElementById('"+x.id+"')); return false;",M=z("th",{width:u.mapperWidth[s]}),o.test(A)||(n.test(A)?O=document.createTextNode(t.language.custom[A]):(P=z("span",null,null,"icon-menu"),O=z("a",{href:"javascript:void(0)",onclick:a},t.language.custom[A]),O.appendChild(P),u.cache.thead[A]=P),u.order[A]=null,M.appendChild(O),I.appendChild(M));E.appendChild(I),C=G.firstChild;try{G.style.display="table"}catch(R){G.style.display="block"}G.insertBefore(E,C),t.table.showHeader||F(E),J=z("div",null,null,"blogtoc_result"),y(J,c.blogtoc_result),H.appendChild(J),K=z("div",null,null,"blogtoc_pagination"),y(K,c.blogtoc_pagination),H.appendChild(K),b.addBadge(),u.cache.thead[f].className="ascending"===e?"icon-arrow-up-4":"icon-arrow-down-5",u.order[f]=e,b.doSorting(f,e),t.label.showLabel||t.label.showAlphabetLabel?(u.currentLabel=t.label.showLabel?t.label.setup:null,u.currentAlphabet=t.label.showAlphabetLabel?t.label.setupAlphabet:null,t.label.showLabel?b.displayLabel(u.currentLabel,null,null,!0):b.displayAlphabet(u.currentAlphabet,null,null,!0)):b.compile(),N.BTLoaded=!0,window["BTJSONCallback_"+x.id]=null,window["BTLDJSONCallback_"+x.id]=null;for(var S=0,T=u.cache.req.length;T>S;S++)F(B(u.cache.req[S]))},buildPagination:function(){var a,b,c,d,e=t.extendClass,f=e["blogtoc_pagination ul"],g=e["blogtoc_pagination current"],h=e["blogtoc_pagination disabled"],i=Math.ceil(v.data.length/u.records),j=u.page,k=j+1,l=j-1,m=j+6,n=j+46,o=j-6,p=j-46,q=t.pagination.adjacents,r=2*q,s=x.id,w="blogtoc_responsive_hide";if(i>1){if(b=z("ul",null,null,f),j>1?(d=$(1,t.language.custom.firstPage,"a",s),b.appendChild(d),d=$(l,t.language.custom.prevPage,"a",s)):d=$(null,t.language.custom.prevPage,"span",s,h),b.appendChild(d),7+r>i)for(a=1;i>=a;a++)d=a===j?$(null,a,"span",s,g):$(a,a,"a",s,w),b.appendChild(d);else if(i>5+r){if(p-r>1&&(a=p-r,d=$(a,a,"a",s,w),b.appendChild(d)),o-r>1&&(a=o-r,d=$(a,a,"a",s,w),b.appendChild(d)),2+r>j){for(a=1;4+r>a;a++)d=a===j?$(null,a,"span",s,g):$(a,a,"a",s,w),b.appendChild(d);d=$(null,"...","span",s,w),b.appendChild(d)}else if(i-r>j&&j>1+r){for(d=$(null,"...","span",s,w),b.appendChild(d),a=j-q;j+q>=a;a++)d=a===j?$(null,a,"span",s,g):$(a,a,"a",s,w),b.appendChild(d);d=$(null,"...","span",s,w),b.appendChild(d)}else for(d=$(null,"...","span",s,w),b.appendChild(d),a=i-(2+r);i>=a;a++)d=a===j?$(null,a,"span",s,g):$(a,a,"a",s,w),b.appendChild(d);i>m+r&&(a=m+r,d=$(a,a,"a",s,w),b.appendChild(d)),i>n+r&&(a=n+r,d=$(a,a,"a",s,w),b.appendChild(d))}i>j?(d=$(k,t.language.custom.nextPage,"a",s),b.appendChild(d),d=$(i,t.language.custom.lastPage,"a",s)):d=$(null,t.language.custom.nextPage,"span",s,h),b.appendChild(d)}(c=K.getElementsByTagName("ul")[0])?b?K.replaceChild(b,c):K.removeChild(c):b?K.appendChild(b):null},makeLabel:function(a,b,c,d,e,f,g){var h,i,j,k=0,l=a.length,m=!1;if(t.label[b]){if(t.label[c]){for(i=z("div",null,null,e),y(i,f);l>k;k++)h=a[k]===t.language.custom.labelAll?"All":a[k],j=z("button",{type:"button",value:h,onclick:g},a[k]),y(j,t.extendClass.blogtoc_button),h===t.label[d]&&(j.disabled=!0,m=!0),i.appendChild(j);m||(t.label[d]=i.firstChild.getAttribute("value"),i.firstChild.disabled=!0)}else{for(i=z("select",{onchange:g},null,e),y(i,f);l>k;k++)h=a[k]===t.language.custom.labelAll?"All":a[k],j=z("option",{value:h},a[k]),h===t.label[d]&&(j.selected=!0,m=!0),i.appendChild(j);m||(t.label[d]=i.firstChild.value,i.firstChild.selected=!0)}C.appendChild(i)}},buildResult:function(){var a=v.data.length,b=u.page*u.records,c={begin:a?(u.page-1)*u.records+1:0,end:a>b?b:a,total:a},d=t.language.custom.result.replace(/\{(.*?)\}/gi,function(a,b){return"<b>"+c[b]+"</b>"});J.innerHTML=d},displayLabel:function(a,b,c,d){var e=this;if(d&&(v.data=u.cache.original.slice(0)),null!=u.currentLabel){if(d&&null!=u.currentAlphabet&&e.displayAlphabet(u.currentAlphabet,null,!0),""===a&&(a=b.getAttribute("value")),u.currentLabel=a,a!==t.label.setup){for(var f=[],g=0,h=v.data.length;h>g;g++)I(a,v.data[g].category)&&f.push(v.data[g]);v.data=f.slice(0)}if(u.cache.tempData=v.data.slice(0),!c){if(b&&"button"===b.tagName.toLowerCase()){for(var i=b.parentNode.childNodes,j=i.length;j--;)i[j].disabled=!1;b.disabled=!0}u.page=1,u.pageState=1;var k;(k=D.getElementsByTagName("input")[0].value)?e.query(k):(e.compile(),u.cache.feedLeft=t.table.initDataLoad)}}},displayAlphabet:function(a,b,c,d){var e=this;if(d&&(v.data=u.cache.original.slice(0)),null!=u.currentAlphabet){if(d&&null!=u.currentLabel&&e.displayLabel(u.currentLabel,null,!0),""===a&&(a=b.getAttribute("value")),u.currentAlphabet=a,a!==t.label.setupAlphabet){var f,g=[];f="#"===a?new RegExp("^[^A-Z]{1,}.*","i"):new RegExp("^"+a+"{1,}.*","i");for(var h=0,i=v.data.length;i>h;h++)~v.data[h].title.search(f)&&g.push(v.data[h]);v.data=g.slice(0)}if(u.cache.tempData=v.data.slice(0),!c){if(b&&"button"===b.tagName.toLowerCase()){for(var j=b.parentNode.childNodes,k=j.length;k--;)j[k].disabled=!1;b.disabled=!0}u.page=1,u.pageState=1;var l;(l=D.getElementsByTagName("input")[0].value)?e.query(l):(e.compile(),u.cache.feedLeft=t.table.initDataLoad)}}},sorting:function(a){var b=this,c=u.order,d=u.cache.thead;if(v.data.length){for(var e in d)a!==e?(d[e].className="icon-menu",c[e]="descending"):(d[e].className="ascending"===c[e]?"icon-arrow-down-5":"icon-arrow-up-4",c[e]="ascending"===c[e]?"descending":"ascending");b.doSorting(a,c[a]),b.compile()}},doSorting:function(a,b){var c=v.data,d=t.date.day,e=u.cache;e[a]=e[a]||{},v.data="ascending"===b?db(c,a,d).slice(0):db(c,a,d).slice(0).reverse(),e.original=e.original?"ascending"===b?db(e.original,a,d).slice(0):db(e.original,a,d).slice(0).reverse():v.data.slice(0)},changeDisplay:function(a){var b=this;u.records=+a,v.data[(u.page-1)*u.records]||(u.page=1),b.compile()},query:function(a){var b=this;if(a=a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),v.data=u.cache.tempData?u.cache.tempData.slice(0):u.cache.original.slice(0),a){u.searchRegex=new RegExp(a,"igm"),u.searchState=!0,u.page=1;for(var c=[],d=0,e=v.data.length;e>d;d++)~v.data[d].title.search(u.searchRegex)&&c.push(v.data[d]);v.data=c.slice(0)}else{var f=Math.ceil(v.data.length/u.records);u.searchRegex=null,u.page=u.pageState<=f?u.pageState:1}u.searchState&&b.compile()},changePage:function(a){var b=this;u.page=+a,u.pageState=u.page,window.scroll(x.offsetLeft,x.offsetTop),b.compile()},addBadge:function(){var a=this;a.doSorting("publishDate","descending");for(var b=v.data,c=0,d=b.length,e=t.newBadge.setup,f=t.newBadge.render(t.language.custom.newLabel);d>c;c++)e?(b[c].badge='<span class="blogtoc_badge">'+f+"</span>",e--):b[c].badge='<span class="blogtoc_badge" style="display:none;"></span>'},calculate:function(){for(var a,b=0,c=u.mapper.length,d=u.mapper,e=t.table,f=0;c>b;b++)f+=e[d[b]+"WidthPoint"];for(b=0;c>b;b++)a=Math.round(100*(e[d[b]+"WidthPoint"]/f)),u.mapperWidth.push(a+"%")},compile:function(){var a,b,c=this;u.cache.img=new Array,u.cache.aimg=new Array,u.cache.feedLeft=0,u.searchRegex||(u.searchState=!1),a=z("tbody");var d=function(a,b){if(b){var c,d,e,f,g=a.parentNode,h=g.BTConfig,i=g.BTOptions,j=g.BTFeed,k=(h.page-1)*h.records+h.cache.feedLeft,l=k+i.table.initDataLoad,m=h.page*h.records,n=j.data.length,o=(i.thumbnail.authorSize,k),p=k,q=h.mapper.length;for(n||b.getElementsByTagName("tr")[0]||(e=z("tr"),f=z("td",{colSpan:q},i.language.custom.noRecords,"blogtoc_norecords"),e.appendChild(f),b.appendChild(e));l>o;o++){if(o>=m||o>=n)return;d=j.data[o],h.cache.feedLeft++,p++,e=z("tr");for(var r=0;q>r;r++)c=h.mapper[r],f=z("td"),f.setAttribute("data-title",c),f.appendChild(_(c,p,d,i,h,f)),e.appendChild(f);b.appendChild(e)}}};d(x,a),c.buildResult(),c.buildPagination();var e=function(a){var b=a.clientHeight,c=window.innerHeight||document.documentElement.clientHeight,e=window.pageYOffset||document.documentElement.scrollTop,f=a.getElementsByTagName("tbody")[0];100>b-c-e&&d(a,f)},f=function(){cb(N.BTConfig.cache.img,N.BTOptions.thumbnail.notFound),cb(N.BTConfig.cache.aimg,N.BTConfig.nat),e(N.BTID)};f(),w(u.registeredEvent,window,"scroll",f),w(u.registeredEvent,window,"resize",f),(b=G.getElementsByTagName("tbody")[0])?G.replaceChild(a,b):G.appendChild(a)}};var O=b.language&&b.language.setup?b.language.setup:r,P=b.theme&&b.theme.setup?b.theme.setup:s;return W(N,O,P,b),this}};Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&1/0!=d&&d!=-1/0&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}));var u=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},v=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=null},w=function(a,b,c,d){a[b]=a[b]||{},a[b][c]||(a[b][c]=d,u(b,c,d))},x=function(a,b,c){a[b]&&a[b][c]?(v(b,c,a[b][c]),a[b][c]=null):v(b,c,null)},y=function(a,b){if(b){var c,d,e=0;if(!b&&"string"!=typeof b)return;if(c=b.split(/\s+/),1===a.nodeType)if(a.className||1!==c.length){for(d=" "+a.className+" ";e<c.length;e++)-1===d.indexOf(" "+c[e]+" ")&&(d+=c[e]+" ");a.className=d.trim()}else a.className=b}},z=function(a,b,c,d){var e=document.createElement(a);if("object"==typeof b)for(var f in b)"style"==f?e.style.cssText=b[f]:/^on/i.test(f)?e[f]=new Function(b[f]):e.setAttribute?e.setAttribute(f,b[f]):e[f]=b[f];return c&&(e.innerHTML=c),d&&(e.className=d),e},A=function(a){var b=a.getBoundingClientRect();return b.top>=0&&b.left>=0&&b.top<=(window.innerHeight||document.documentElement.clientHeight)},B=function(a){return document.getElementById(a)},C=function(a){return"object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName},D=function(a,b){return b=Object.prototype.toString.call(a),"object"==typeof a&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(b)&&"number"==typeof a.length&&"undefined"!=typeof a.item&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},E=function(a,b){for(b=a.nextSibling;b&&1!==b.nodeType;)b=b.nextSibling;return b},F=function(a){a.parentNode.removeChild(a)},G=function(a,b){return b=z("div"),b.innerHTML=a,b.firstChild},H=function(a,b,c){for(var d=0,e=a.length;e>d;d++)if(c=new RegExp(a[d],"gi"),c.test(b))return d;return-1},I=function(a,b){return!!~b.indexOf(a)},J=function(a){for(var b,c,d=arguments,e=d.length;e>1&&a.length;)for(b=d[--e];-1!==(c=a.indexOf(b));)a.splice(c,1);return a},K=function(a,b){if(document.createStyleSheet)document.createStyleSheet(X(a),0);else{var c=document.createElement("link");c.type="text/css",c.rel="stylesheet",c.href=X(a);var d=document.getElementsByTagName("head")[0];b?d.insertBefore(c,d.childNodes[d.childNodes.length-1]):setTimeout(function(){d.appendChild(c)},1e3)}},L=function(a,b){for(var c=document.getElementsByTagName("head")[0],d=c.getElementsByTagName("link"),e=d.length,f=a.substr(a.lastIndexOf("/"));e--;)if(d[e].href&&~d[e].href.lastIndexOf(f))return;K(a,b)},M=function(a,b,c,d){var e=document.createElement("script");e.type="text/javascript",e.src=X(a),b&&(e.id=b),d||(e.async=!0),c&&(e.onerror=c),document.getElementsByTagName("head")[0].appendChild(e)},N=function(a,b,c,d){for(var e=document.getElementsByTagName("script"),f=e.length,g=a.substr(a.lastIndexOf("/"));f--;)if(e[f].src&&~e[f].src.lastIndexOf(g))return;M(a,b,c,d)},O=function(a,b){return a?b?a+" "+b:a:b?b:""},P=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]="object"==typeof b[c]?P(a[c],b[c]):O(b[c],a[c]));return a},Q=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]="object"==typeof b[c]?Q(a[c],b[c]):b[c]);return a},R=function(a,b){for(var c in b)b.hasOwnProperty(c)&&("object"==typeof b[c]?a[c]=R(a[c],b[c]):"boolean"==typeof a[c]||"number"==typeof a[c]||a[c]||(a[c]=b[c]));return a},S=function(a,b,c){I(b,a)||a.push(b);for(var d=0,e=a.length,f={name:[],num:[]};e>d;d++)"string"==typeof a[d]?f.num.push(c):f.num.push(a[d]);for(f.num=f.num.sort(function(a,b){return a-b}),d=0;e>d;d++)f.name.push(a[d]);return f},T=function(a){for(var b in a)return!1;return!0},U=function(a,b){return new Date(parseInt(a[0],10),parseInt(a[1]-1,10),parseInt(a[2],10),parseInt(b[0],10),parseInt(b[1],10),parseInt(b[2],10))},V=function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},W=function(a,b,c,d){setTimeout(function(){!T(b)&&q[b]&&!T(c)&&p[c]?(a.BTID.style.display="block",a.BTAPP.run(d)):W(a,b,c,d)},100)},X=function(a){var c=new RegExp("^((ftp|https?)?:?\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return c.test(a)?a:(0===a.indexOf("/")&&(a=a.substring(1)),b+a)},Y=function(){return(new Date).getTime()+V(1,1e3)},Z=function(a,b,c){var d=parseInt(1.5*b,10),e={boxresizer:"http://proxy.boxresizer.com/convert?resize="+d+"x"+d+"&"+"source="+a,mobify:"http://ir0.mobify.com/jpg100/"+d+"/"+d+"/"+a,sencha:"http://src.sencha.io/"+d+"/"+d+"/"+a,google:"https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?resize_w="+d+"&resize_h="+d+"&"+"url="+a+"&"+"container=focus"};return e[c]},$=function(a,b,c,d,e){var f={a:{href:"javascript:void(0)",onclick:"BlogToc.page("+a+", document.getElementById('"+d+"')); return false;"},span:null},g=z("li",null,null,e),h=z(c,f[c],b);return g.appendChild(h),g},_=function(a,b,c,d,e,f,g){return g={author:function(){var a=z("span",null,c.author),b=z("div",null,null,"blogtoc_authorthumbnail");if(d.thumbnail.authorThumbnail){var f=d.thumbnail.authorSize,g=z("img",{src:d.thumbnail.blank,style:"width:"+f+"px;height:"+f+"px;","data-src":c.authorThumbnail,"data-loaded":"no"},null,"bt-thumb");b.appendChild(g),e.cache.aimg.push(g)}return b.appendChild(a),b},comment:function(){return z("a",{href:c.commentURL},'<span class="icon icon-comment-2"></span> '+c.comment.toString())},index:function(){return document.createTextNode(b)},thumbnail:function(){var a=z("img",{src:d.thumbnail.blank,style:e.tbimg,"data-src":c.thumbnail,"data-loaded":"no"},null,"bt-thumb"),b=z("a",{href:c.actualImage,style:e.tbwrapper},null,"blogtoc_thumbnail");return b.appendChild(a),e.cache.img.push(a),b},title:function(){var a,b;return a=e.searchRegex?c.title.replace(e.searchRegex,function(a){return d.search.markerRender(a)}):c.title,b=z("a",{href:c.titleURL,title:c.summary},a),f.appendChild(b),G(c.badge)},def:function(){return document.createTextNode(c[a])}},a in g&&g[a]()||g.def()},ab=function(a,b,c){R(c,b[a].options)},bb=function(a,b,c){if(b&&b[a]){var d=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b["blogtoc_"+c]=a[c]);return b};P(c,d(b[a].options)),L(b[a].url,!0)}},cb=function(a,b){if(a.length){for(var c=0,d=a.length;d>c&&("yes"===a[c].getAttribute("data-loaded")||!A(a[c]));c++);if(a[c]){var e=function(){a[c]&&(a[c].removeAttribute("width"),a[c].removeAttribute("height"),a[c].onload=function(){this.setAttribute("data-loaded","yes"),J(a,this),d>c&&A(this)&&e()},a[c].onerror=function(){this.setAttribute("data-loaded","yes"),this.src=b,J(a,this),d>c&&A(this)&&e()},a[c].src=a[c].getAttribute("data-src"))};e()}}},db=function(a,b,c,d){return a.length?(d=~H(c,a[0][b])?function(a,c){return a[b+"Format"]-c[b+"Format"]}:"string"==typeof a[0][b]?function(a,c){return a[b].toLowerCase()>c[b].toLowerCase()?1:-1}:function(a,c){return a[b]-c[b]},a.sort(d)):a},eb=function(a,b){var c=b?b:"blogtoc_"+Y(),d=['<div id="'+c+'" style="zoom: 1; display: none;">','<div class="blogtoc_loader"></div>','<div class="blogtoc_header"></div>','<div class="blogtoc_filter"></div>','<table class="blogtoc_table" style="display: none;"></table>','<div class="blogtoc_footer"></div>',"</div>"].join("");return a?a.innerHTML=d:document.write(d),B(c)},fb=function(a){var b=a.BTID,c=b.firstChild,d=E(c),e=E(d),f=E(e),g=E(f);c.innerHTML="",d.innerHTML="",e.innerHTML="",f.innerHTML="",g.innerHTML="",b.className="",c.className="blogtoc_loader",d.className="blogtoc_header",e.className="blogtoc_filter",f.className="blogtoc_table",g.className="blogtoc_footer",b.style.display="block",c.style.display="block",f.style.display="none"},gb=function(a){var b,c={},d=0,e=new Image,f=[["boxresizer","http://proxy.boxresizer.com/convert?resize=1x1&source="+a],["mobify","http://ir0.mobify.com/jpg1/1/1/"+a],["google","https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?url="+a+"&container=focus&resize_w=1&resize_h=1"],["sencha","http://src.sencha.io/1/1/"+a]];b=f.length;var g=function(){e.src=f[d][1],e.onload=function(){c.server=f[d][0]},e.onerror=function(){d++,g()}};return g(),c},hb=function(a,b){if(a||(a={blogtocId:null}),D(b)){a.blogtocId=null;for(var c=0,d=b.length;d>c;c++)this.blogtocBuilder(a,b[c])}else if(C(b))b.BTID=eb(b,a.blogtocId),t(b,a);else{var e=eb(null,a.blogtocId);b=e.parentNode,b.BTID=e,t(b,a)}},ib=function(a){this.element=a};ib.prototype.build=function(a){return hb(a,this.element),this};var jb=function(a){return new ib(a)};jb.build=function(a,b){return hb(a,b),this},jb.reset=function(a,b,c){if(!a.BTID)return this;var d=function(){setTimeout(function(){a.BTLoaded||jb.reset(a,b,c)},1)};if(d(),!a.BTLoaded)return this;a.BTConfig&&(x(a.BTConfig.registeredEvent,window,"scroll"),x(a.BTConfig.registeredEvent,window,"resize")),b?c||(c={}):c=a.BTOptions,fb(a),a.BTLoaded=!1;var e=c.language&&c.language.setup?c.language.setup:a.BTOptions.language.setup,f=c.theme&&c.theme.setup?c.theme.setup:a.BTOptions.theme.setup;return W(a,e,f,c),this},jb.display=function(a,b){return b.parentNode.BTAPP.changeDisplay(a),this},jb.label=function(a,b,c){return c.parentNode.BTAPP.displayLabel(b,a,null,!0),this},jb.alphabet=function(a,b,c){return c.parentNode.BTAPP.displayAlphabet(b,a,null,!0),this},jb.page=function(a,b){return b.parentNode.BTAPP.changePage(a),this},jb.search=function(a,b){return b.parentNode.BTAPP.query(a),this},jb.sort=function(a,b){return b.parentNode.BTAPP.sorting(a),this},jb.language=function(a,b){return q[a]={},q[a].options=b,this},jb.theme=function(a,b,c){return p[a]={},p[a].url=b,p[a].options=c,this},jb.addCSS=function(a,b){return L(a,b),this},jb.addJS=function(a,b,c,d){return N(a,b,c,d),this},jb.baseURL=function(a){return b=a,this},window.BlogToc=jb}()};"undefined"!=typeof window&&(a(),BlogToc.addCSS("//cdn.jsdelivr.net/bootmetro/1.0.0a1/css/bootmetro-icons.min.css"),BlogToc.addJS("lang/en-US.js"),BlogToc.addJS("theme/bt_bootstrap.js"))}();